"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.LZStringGenerator=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),YIELD_MASK=15,LZStringGenerator=function(){function a(a,b){if(!e[a]){e[a]={};for(var c=0;c<a.length;c++)e[a][a.charAt(c)]=c}return e[a][b]}var b=String.fromCharCode,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e={},f={compressToBase64:_regenerator.default.mark(function compressToBase64(a){var b;return _regenerator.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(null!==a){d.next=2;break}return d.abrupt("return","");case 2:return d.delegateYield(f._compress(a,6,function(b){return c.charAt(b)}),"t0",3);case 3:b=d.t0,d.t1=b.length%4,d.next=0===d.t1?7:1===d.t1?8:2===d.t1?9:3===d.t1?10:7;break;case 7:return d.abrupt("return",b);case 8:return d.abrupt("return",b+"===");case 9:return d.abrupt("return",b+"==");case 10:return d.abrupt("return",b+"=");case 11:case"end":return d.stop();}},compressToBase64)}),decompressFromBase64:_regenerator.default.mark(function decompressFromBase64(b){return _regenerator.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(null!==b){d.next=2;break}return d.abrupt("return","");case 2:if(""!==b){d.next=4;break}return d.abrupt("return",null);case 4:return d.delegateYield(f._decompress(b.length,32,function(d){return a(c,b.charAt(d))}),"t0",5);case 5:return d.abrupt("return",d.t0);case 6:case"end":return d.stop();}},decompressFromBase64)}),compressToUTF16:_regenerator.default.mark(function compressToUTF16(a){return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(null!==a){c.next=2;break}return c.abrupt("return","");case 2:return c.delegateYield(f._compress(a,15,function(c){return b(c+32)}),"t0",3);case 3:return c.t1=c.t0,c.abrupt("return",c.t1+" ");case 5:case"end":return c.stop();}},compressToUTF16)}),decompressFromUTF16:_regenerator.default.mark(function decompressFromUTF16(a){return _regenerator.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(null!==a){b.next=2;break}return b.abrupt("return","");case 2:if(""!==a){b.next=4;break}return b.abrupt("return",null);case 4:return b.delegateYield(f._decompress(a.length,16384,function(b){return a.charCodeAt(b)-32}),"t0",5);case 5:return b.abrupt("return",b.t0);case 6:case"end":return b.stop();}},decompressFromUTF16)}),compressToUint8Array:_regenerator.default.mark(function compressToUint8Array(a){var b,c,d,e,g;return _regenerator.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.delegateYield(f.compress(a),"t0",1);case 1:return b=h.t0,c=new Uint8Array(2*b.length),void(h.next=5);case 5:d=0,e=b.length;case 6:if(!(d<e)){h.next=16;break}if(0!=(d&YIELD_MASK)){h.next=10;break}return void(h.next=10);case 10:g=b.charCodeAt(d),c[2*d]=g>>>8,c[2*d+1]=g%256;case 13:d++,h.next=6;break;case 16:return h.abrupt("return",c);case 17:case"end":return h.stop();}},compressToUint8Array)}),decompressFromUint8Array:_regenerator.default.mark(function decompressFromUint8Array(a){var b,c,d;return _regenerator.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a&&void 0!==a){e.next=5;break}return e.delegateYield(f.decompress(a),"t0",2);case 2:return e.abrupt("return",e.t0);case 5:b=Array(a.length/2),c=0,d=b.length;case 7:if(!(c<d)){e.next=15;break}if(0!=(c&YIELD_MASK)){e.next=11;break}return void(e.next=11);case 11:b[c]=256*a[2*c]+a[2*c+1];case 12:c++,e.next=7;break;case 15:return void(e.next=17);case 17:return e.delegateYield(f.decompress(b.join("")),"t1",18);case 18:return e.abrupt("return",e.t1);case 19:case"end":return e.stop();}},decompressFromUint8Array)}),compressToEncodedURIComponent:_regenerator.default.mark(function compressToEncodedURIComponent(a){return _regenerator.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(null!==a){b.next=2;break}return b.abrupt("return","");case 2:return b.delegateYield(f._compress(a,6,function(b){return d.charAt(b)}),"t0",3);case 3:return b.abrupt("return",b.t0);case 4:case"end":return b.stop();}},compressToEncodedURIComponent)}),decompressFromEncodedURIComponent:_regenerator.default.mark(function decompressFromEncodedURIComponent(b){return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(null!==b){c.next=2;break}return c.abrupt("return","");case 2:if(""!==b){c.next=4;break}return c.abrupt("return",null);case 4:return b=b.replace(/ /g,"+"),c.delegateYield(f._decompress(b.length,32,function(c){return a(d,b.charAt(c))}),"t0",6);case 6:return c.abrupt("return",c.t0);case 7:case"end":return c.stop();}},decompressFromEncodedURIComponent)}),compress:_regenerator.default.mark(function compress(a){return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.delegateYield(f._compress(a,16,function(c){return b(c)}),"t0",1);case 1:return c.abrupt("return",c.t0);case 2:case"end":return c.stop();}},compress)}),_compress:_regenerator.default.mark(function _compress(a,b,c){var d,e,f,g,h,j,k,l,m,n,o,p,q,r;return _regenerator.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(null!==a){i.next=2;break}return i.abrupt("return","");case 2:f={},g={},h="",j="",k="",l=2,m=3,n=2,o=[],p=0,q=0,r=0;case 4:if(!(r<a.length)){i.next=44;break}if(0!=(r&YIELD_MASK)){i.next=8;break}return void(i.next=8);case 8:if(h=a.charAt(r),Object.prototype.hasOwnProperty.call(f,h)||(f[h]=m++,g[h]=!0),j=k+h,!Object.prototype.hasOwnProperty.call(f,j)){i.next=15;break}k=j,i.next=41;break;case 15:if(!Object.prototype.hasOwnProperty.call(g,k)){i.next=35;break}if(!(256>k.charCodeAt(0))){i.next=24;break}for(d=0;d<n;d++)p<<=1,q===b-1?(q=0,o.push(c(p)),p=0):q++;return e=k.charCodeAt(0),void(i.next=21);case 21:for(d=0;8>d;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;i.next=30;break;case 24:for(e=1,d=0;d<n;d++)p=p<<1|e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e=0;return e=k.charCodeAt(0),void(i.next=29);case 29:for(d=0;16>d;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;case 30:l--,0===l&&(l=Math.pow(2,n),n++),delete g[k],i.next=37;break;case 35:for(e=f[k],d=0;d<n;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;case 37:l--,0===l&&(l=Math.pow(2,n),n++),f[j]=m++,k=h+"";case 41:r+=1,i.next=4;break;case 44:if(""===k){i.next=71;break}if(!Object.prototype.hasOwnProperty.call(g,k)){i.next=67;break}if(!(256>k.charCodeAt(0))){i.next=54;break}for(d=0;d<n;d++)p<<=1,q===b-1?(q=0,o.push(c(p)),p=0):q++;return e=k.charCodeAt(0),void(i.next=51);case 51:for(d=0;8>d;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;i.next=62;break;case 54:return e=1,void(i.next=57);case 57:for(d=0;d<n;d++)p=p<<1|e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e=0;return e=k.charCodeAt(0),void(i.next=61);case 61:for(d=0;16>d;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;case 62:l--,0===l&&(l=Math.pow(2,n),n++),delete g[k],i.next=69;break;case 67:for(e=f[k],d=0;d<n;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;case 69:l--,0===l&&(l=Math.pow(2,n),n++);case 71:return e=2,void(i.next=74);case 74:for(d=0;d<n;d++)p=p<<1|1&e,q===b-1?(q=0,o.push(c(p)),p=0):q++,e>>=1;return void(i.next=77);case 77:if(p<<=1,q!==b-1){i.next=84;break}return o.push(c(p)),i.abrupt("break",87);case 84:q++;case 85:i.next=77;break;case 87:return i.next=89,!0;case 89:return i.abrupt("return",o.join(""));case 90:case"end":return i.stop();}},_compress)}),decompress:_regenerator.default.mark(function decompress(a){return _regenerator.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(null!==a){b.next=2;break}return b.abrupt("return","");case 2:if(""!==a){b.next=4;break}return b.abrupt("return",null);case 4:return b.delegateYield(f._decompress(a.length,32768,function(b){return a.charCodeAt(b)}),"t0",5);case 5:return b.abrupt("return",b.t0);case 6:case"end":return b.stop();}},decompress)}),_decompress:_regenerator.default.mark(function _decompress(a,e,f){var g,h,j,k,l,m,n,o,p,q,r,s,t,u,v;return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(g=[],h=4,j=4,k=3,l="",m=[],u={val:f(0),position:e,index:1},n=0;3>n;n+=1)g[n]=n;for(p=0,r=Math.pow(2,2),s=1;s!==r;)q=u.val&u.position,u.position>>=1,0===u.position&&(u.position=e,u.val=f(u.index++)),p|=(0<q?1:0)*s,s<<=1;c.t0=p,c.next=0===c.t0?9:1===c.t0?15:2===c.t0?21:22;break;case 9:for(p=0,r=Math.pow(2,8),s=1;s!==r;)q=u.val&u.position,u.position>>=1,0===u.position&&(u.position=e,u.val=f(u.index++)),p|=(0<q?1:0)*s,s<<=1;return t=b(p),c.abrupt("break",23);case 15:for(p=0,r=Math.pow(2,16),s=1;s!==r;)q=u.val&u.position,u.position>>=1,0===u.position&&(u.position=e,u.val=f(u.index++)),p|=(0<q?1:0)*s,s<<=1;return t=b(p),c.abrupt("break",23);case 21:return c.abrupt("return","");case 22:return c.abrupt("break",23);case 23:g[3]=t,o=t,m.push(t),v=0;case 27:if(0!=(v++&YIELD_MASK)){c.next=31;break}return void(c.next=31);case 31:if(!(u.index>a)){c.next=33;break}return c.abrupt("return","");case 33:p=0,r=Math.pow(2,k),s=1;case 36:if(s===r){c.next=47;break}if(0!=(v++&YIELD_MASK)){c.next=40;break}return void(c.next=40);case 40:q=u.val&u.position,u.position>>=1,0===u.position&&(u.position=e,u.val=f(u.index++)),p|=(0<q?1:0)*s,s<<=1,c.next=36;break;case 47:c.t1=t=p,c.next=0===c.t1?50:1===c.t1?68:2===c.t1?86:87;break;case 50:p=0,r=Math.pow(2,8),s=1;case 53:if(s===r){c.next=64;break}if(0!=(v++&YIELD_MASK)){c.next=57;break}return void(c.next=57);case 57:q=u.val&u.position,u.position>>=1,0===u.position&&(u.position=e,u.val=f(u.index++)),p|=(0<q?1:0)*s,s<<=1,c.next=53;break;case 64:return g[j++]=b(p),t=j-1,h--,c.abrupt("break",88);case 68:p=0,r=Math.pow(2,16),s=1;case 71:if(s===r){c.next=82;break}if(0!=(v++&YIELD_MASK)){c.next=75;break}return void(c.next=75);case 75:q=u.val&u.position,u.position>>=1,0===u.position&&(u.position=e,u.val=f(u.index++)),p|=(0<q?1:0)*s,s<<=1,c.next=71;break;case 82:return g[j++]=b(p),t=j-1,h--,c.abrupt("break",88);case 86:return c.abrupt("return",m.join(""));case 87:return c.abrupt("break",88);case 88:if(0===h&&(h=Math.pow(2,k),k++),!g[t]){c.next=93;break}l=g[t],c.next=98;break;case 93:if(t!==j){c.next=97;break}l=o+o.charAt(0),c.next=98;break;case 97:return c.abrupt("return",null);case 98:m.push(l),g[j++]=o+l.charAt(0),h--,o=l,0===h&&(h=Math.pow(2,k),k++),c.next=27;break;case 105:case"end":return c.stop();}},_decompress)})};return f}();exports.LZStringGenerator=LZStringGenerator;